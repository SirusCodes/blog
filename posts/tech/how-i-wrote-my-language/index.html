<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How I wrote my language: AntiLang | Darshan's Blog</title><meta name=keywords content="AntiLang,Programming Language,Go"><meta name=description content="In this blog, I talk about my thought process, what I learned, and how I built AntiLang."><meta name=author content="Darshan Rander"><link rel=canonical href=https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://blog.darshanrander.com/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.darshanrander.com/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.darshanrander.com/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.darshanrander.com/favicons/apple-touch-icon.png><link rel=mask-icon href=https://blog.darshanrander.com/favicons/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async defer src=https://analytics.darshanrander.com/script.js data-website-id=900abcb8-7747-4813-8b7d-9fa5caebe82c></script><meta property="og:url" content="https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/"><meta property="og:site_name" content="Darshan's Blog"><meta property="og:title" content="How I wrote my language: AntiLang"><meta property="og:description" content="In this blog, I talk about my thought process, what I learned, and how I built AntiLang."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-01T00:00:00+05:30"><meta property="article:modified_time" content="2025-03-01T00:00:00+05:30"><meta property="og:image" content="https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover.png"><meta property="og:see_also" content="https://blog.darshanrander.com/posts/tech/animating-canvas-in-flutter/"><meta property="og:see_also" content="https://blog.darshanrander.com/posts/tech/serverside-dart-2/"><meta property="og:see_also" content="https://blog.darshanrander.com/posts/tech/serverside-dart/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover.png"><meta name=twitter:title content="How I wrote my language: AntiLang"><meta name=twitter:description content="In this blog, I talk about my thought process, what I learned, and how I built AntiLang."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.darshanrander.com/posts/"},{"@type":"ListItem","position":2,"name":"Tech","item":"https://blog.darshanrander.com/posts/tech/"},{"@type":"ListItem","position":3,"name":"How I wrote my language: AntiLang","item":"https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How I wrote my language: AntiLang","name":"How I wrote my language: AntiLang","description":"In this blog, I talk about my thought process, what I learned, and how I built AntiLang.","keywords":["AntiLang","Programming Language","Go"],"articleBody":"I recently built a programming language called AntiLang. The main idea was to keep all the logical parts of the language the same, while reversing its structureâ€”making it logically correct but structurally inverted.\nI built this language as a fun project. I always wanted to make a language, and I was bored with my day-to-day work, so I found it to be an escape while learning something new.\nThis means that a simple FizzBuzz program would be readable, but might give you a headache and make you wonder why youâ€™re reading it.\n,20 = count let ,0 = i let {count \u003e i} while [ {i % 3 == 0 \u0026\u0026 i % 5 == 0} if [ ,{$FizzBuzz$}print ] {i % 3 == 0} if else [ ,{$Fizz$}print ] {i % 5 == 0} if else [ ,{$Buzz$}print ] else [ ,{i}print ] ,1 += i ] You can try the language using the online interpreter. (Hope it gives you a headache ðŸ™‚)\nThe first draft - invert all brackets -\u003e exchange opening n closing brackets - all control structures are defined at the end of the block - for )i++; i","wordCount":"1926","inLanguage":"en","image":"https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover.png","datePublished":"2025-03-01T00:00:00+05:30","dateModified":"2025-03-01T00:00:00+05:30","author":{"@type":"Person","name":"Darshan Rander"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/"},"publisher":{"@type":"Organization","name":"Darshan's Blog","logo":{"@type":"ImageObject","url":"https://blog.darshanrander.com/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.darshanrander.com/ accesskey=h title="Darshan's Blog (Alt + H)">Darshan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.darshanrander.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.darshanrander.com/series/ title=Series><span>Series</span></a></li><li><a href=https://blog.darshanrander.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://darshanrander.com title=darshanrander.com><span>darshanrander.com</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.darshanrander.com/>Home</a>&nbsp;Â»&nbsp;<a href=https://blog.darshanrander.com/posts/>Posts</a>&nbsp;Â»&nbsp;<a href=https://blog.darshanrander.com/posts/tech/>Tech</a></div><h1 class="post-title entry-hint-parent">How I wrote my language: AntiLang</h1><div class=post-meta><span title='2025-03-01 00:00:00 +0530 +0530'>March 1, 2025</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;1926 words&nbsp;Â·&nbsp;Darshan Rander&nbsp;|&nbsp;<a href=https://github.com/SirusCodes/blog/tree/main/content/posts/tech/how-i-wrote-my-language/index.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager srcset='https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover_hu_77e4330c0b67b888.png 360w,https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover_hu_c4cb35a5f0c9826.png 480w,https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover_hu_9ca1685f6a640615.png 720w,https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover.png 1024w' src=https://blog.darshanrander.com/posts/tech/how-i-wrote-my-language/images/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1024 height=512 alt="AntiLang cover photo"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#the-first-draft aria-label="The first draft">The first draft</a></li><li><a href=#how-i-learned-about-building-languages aria-label="How I Learned About Building Languages">How I Learned About Building Languages</a></li><li><a href=#how-the-antilang-interpreter-works aria-label="How the AntiLang Interpreter Works">How the AntiLang Interpreter Works</a><ul><li><a href=#the-lexer aria-label="The Lexer">The Lexer</a></li><li><a href=#the-parser aria-label="The Parser">The Parser</a><ul><li><a href=#how-your-language-would-follow-the-bodmas-rule aria-label="How your language would follow the BODMAS rule">How your language would follow the BODMAS rule</a></li><li><a href=#you-dont-need-to-write-your-own-parser aria-label="You don&rsquo;t need to write your own parser">You don&rsquo;t need to write your own parser</a></li></ul></li><li><a href=#the-evaluator aria-label="The Evaluator">The Evaluator</a></li></ul></li><li><a href=#what-are-my-learnings aria-label="What are my learnings?">What are my learnings?</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>I recently built a programming language called AntiLang. The main idea was to keep all the logical parts of the language the same, while reversing its structureâ€”making it logically correct but structurally inverted.</p><p>I built this language as a fun project. I always wanted to make a language, and I was bored with my day-to-day work, so I found it to be an escape while learning something new.</p><p>This means that a simple FizzBuzz program would be readable, but might give you a headache and make you wonder why you&rsquo;re reading it.</p><pre tabindex=0><code>,20 = count let
,0 = i let

{count &gt; i} while [
    {i % 3 == 0 &amp;&amp; i % 5 == 0} if [
        ,{$FizzBuzz$}print
    ] {i % 3 == 0} if else [
        ,{$Fizz$}print
    ] {i % 5 == 0} if else [
        ,{$Buzz$}print
    ] else [
        ,{i}print
    ]

    ,1 += i
]
</code></pre><p>You can try the language using the <a href=https://siruscodes.github.io/AntiLang/>online interpreter</a>. (Hope it gives you a headache ðŸ™‚)</p><h1 id=the-first-draft>The first draft<a hidden class=anchor aria-hidden=true href=#the-first-draft>#</a></h1><pre tabindex=0><code>- invert all brackets -&gt; exchange opening n closing brackets
- all control structures are defined at the end of the block
- for )i++; i&lt;n;0=i(
- reverse assignment
- reverse var rules (const is mutable and non-const is immutable)
- array starts from 0 to -n+1
- arg first name second
- reverse header, define, typedef
</code></pre><p><a href=https://x.com/KartikSoneji_>Kartik Soneji</a> and I were on an <a href=https://catchup.ourtech.community/>OTC CatchUp</a> call until 3 or 4 AM, discussing the creation of a language with such a weird syntaxâ€”which resulted in this initial draft. (I&rsquo;m glad I didnâ€™t implement it all.)</p><p>The initial idea was to create a transpiler that converts this language into a C program and then passes it to GCC. We settled on the name reverse-c. Want to steal the initial draft? Go ahead!</p><h1 id=how-i-learned-about-building-languages>How I Learned About Building Languages<a hidden class=anchor aria-hidden=true href=#how-i-learned-about-building-languages>#</a></h1><p>All programming languages are essentially structured text written in files, serving as input for software such as compilers or interpreters.</p><p>These compilers and interpreters give your language its identityâ€”you provide code, and it compiles or interprets it accordingly.</p><p>Thus, you essentially need to write either a compiler or an interpreter.</p><p>I wrote an interpreter while reading <a href=https://interpreterbook.com/>Write an Interpreter in Go</a> and assumed compilers would be considerably more challenging to build. The same author later published another book called <a href=https://compilerbook.com/>Write a Compiler in Go</a> (the name says it all).</p><p>I would recommend you give it a read if you are <strong>really</strong> interested. Now let me tell you how I built AntiLang (or the AntiLang interpreter).</p><h1 id=how-the-antilang-interpreter-works>How the AntiLang Interpreter Works<a hidden class=anchor aria-hidden=true href=#how-the-antilang-interpreter-works>#</a></h1><p>At a high level, it follows three steps:</p><ol><li>Lexer â€“ converts text into tokens.</li><li>Parser â€“ transforms tokens into an Abstract Syntax Tree (AST).</li><li>Evaluator â€“ evaluates the AST (essentially running your program).</li></ol><p>For example, consider this simple loop:</p><pre tabindex=0><code>,0 = i let

{i &lt; 10} while [
    ,1 += i
]
</code></pre><h2 id=the-lexer>The Lexer<a hidden class=anchor aria-hidden=true href=#the-lexer>#</a></h2><p>The lexer&rsquo;s job is to convert this code into tokens. A token is &ldquo;your code minus all the unnecessary things,&rdquo; i.e., all the literals, keywords, operators, and identifiers. For us, all the whitespace and newline characters are unnecessary text, but they are also tokens for languages like Python, which depends on indentation.</p><p>Each special character and operator is validated, while the rest are keywords or identifiers. The lexer processes the input character by character, returning a token for each character or group of characters.</p><p>For our first line, the tokens would be, in sequence: <code>,</code>, <code>0</code>, <code>=</code>, <code>i</code>, and <code>let</code>, where <code>,</code> and <code>=</code> are special characters, <code>0</code> is a literal, <code>i</code> is an identifier, and <code>let</code> is a keyword.</p><p>At this stage, we don&rsquo;t care how the tokens are placed. <code>let i = 0,</code> is also valid, as we are only concerned about all the tokens being legal.</p><p>You can have a look at the code of the lexer at <a href=https://github.com/SirusCodes/AntiLang/tree/main/src/lexer>#AntiLang/src/lexer/</a>.</p><h2 id=the-parser>The Parser<a hidden class=anchor aria-hidden=true href=#the-parser>#</a></h2><p>At this stage, we are not concerned with how tokens are placed, as we are going to build our AST.</p><p><a href=https://en.wikipedia.org/wiki/Abstract_syntax_tree>AST or Abstract Syntax Tree</a> is a tree used to represent code in a tree format.</p><p>For each feature, we need to decide on a structure.</p><p>In AntiLang, all the let statements start with a <code>,</code>, end with a <code>let</code>, between <code>=</code> and <code>let</code> we can have one and only one identifier, and between <code>,</code> and <code>=</code> we can have an expression.</p><pre tabindex=0><code>,&lt;expression&gt; = &lt;identifier&gt; let
</code></pre><p>An expression can be a literal or something that requires a bit of computation to generate a value, and an identifier is a variable.</p><pre tabindex=0><code>,2 + 2 - 4 = zero let
</code></pre><p>The above example is a valid let statement with <code>2 + 2 - 4</code> as an expression and <code>zero</code> as an identifier. At this stage, we won&rsquo;t compute the value of the expression; we will simply create the AST and pass it to the evaluator, which will do all this.</p><p>The AST of the above example will look like&mldr;</p><p><img alt="AST for let statement with expression" loading=lazy src=/posts/tech/how-i-wrote-my-language/images/diagrams/let-statement.png></p><p>We set zero as an identifier which will hold the value of the expression, which would be evaluated later.</p><p>Now that you have understood let statements, I will show how <em>while</em> is parsed.</p><pre tabindex=0><code>{&lt;expression&gt;} while [ &lt;other statements&gt; ]
</code></pre><p>For <em>while</em>, we only care about the expression (condition) between <code>{</code> and <code>}</code> and the statements between <code>[</code> and <code>]</code>. We can write some code to get an AST like this:</p><p><img alt="AST for while statement" loading=lazy src=/posts/tech/how-i-wrote-my-language/images/diagrams/while-statement.png></p><p>The AST for this program would look like&mldr;</p><p><img alt="AST for the Program" loading=lazy src=/posts/tech/how-i-wrote-my-language/images/diagrams/program-ast.png></p><pre tabindex=0><code>,0 = i let

{i &lt; 10} while [
    ,1 += i
]
</code></pre><p>It looks complex, right? Sure it is. I cannot tell you how many test cases I have written to cover those weird edge cases, and I must say I might have missed a few.</p><p>Now that you have the AST for your program, you can pass it to the evaluator. But before that, I need to tell you a few things.</p><h3 id=how-your-language-would-follow-the-bodmas-rule>How your language would follow the BODMAS rule<a hidden class=anchor aria-hidden=true href=#how-your-language-would-follow-the-bodmas-rule>#</a></h3><p>We understand from childhood that the value of <code>2 * 2 - 2</code> is <strong>2</strong> and not <strong>0</strong>. Because we look at it like <code>(2 * 2) - 2</code>, which means we need to multiply first, then subtract, and not the other way aroundâ€”thanks to BODMAS. I hope you all know what BODMAS is, but for those who don&rsquo;t: It <a href=https://www.mathsisfun.com/operation-order-bodmas.html>defines the order of operations</a>.</p><p>But it&rsquo;s very difficult for computer code to understand, but <a href=https://en.wikipedia.org/wiki/Vaughan_Pratt>Vaughan Pratt</a> described how someone can do it. His algorithm is called Pratt Parsing or Top Down Operator Precedence.</p><p>Explaining that algorithm could be another blog, but Bob Nystrom did a great job in <a href=https://journal.stuffwithstuff.com/2011/03/19/pratt-parsers-expression-parsing-made-easy/>Pratt Parsers: Expression Parsing Made Easy</a> explaining how it&rsquo;s done. I would urge you to implement it yourself.</p><h3 id=you-dont-need-to-write-your-own-parser>You don&rsquo;t need to write your own parser<a hidden class=anchor aria-hidden=true href=#you-dont-need-to-write-your-own-parser>#</a></h3><p>Sorry, I forgot to tell you that you don&rsquo;t need to write a parser by hand; you can use tools like <a href=https://www.antlr.org/>ANTLR</a> which can do it for you. I didn&rsquo;t use it as I wanted to learn how things work and I didn&rsquo;t want to learn how to use another tool.</p><p>But writing this parser was the most fun part, as I had to find a lot of hacky ways and fight against stupid suggestions from GitHub Copilot. Whenever something clicked, I got so, so happy.</p><h2 id=the-evaluator>The Evaluator<a hidden class=anchor aria-hidden=true href=#the-evaluator>#</a></h2><p>Finally, we pass the AST to the evaluator to run the program.</p><p>The evaluator processes each child node of the Program root node, executing your program. It also holds information about all the built-in functions and stores the values of your variables and function definitions.</p><p>In AntiLang, we leverage Go for built-in functions (for example, we pass data directly to <code>fmt.Println</code> to print it), and Go handles garbage collection, so we don&rsquo;t have to.</p><p>For a let statement, we simply evaluate the expression on the left-hand side and store the resulting literal in the environment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>case</span> <span class=o>*</span><span class=nx>ast</span><span class=p>.</span><span class=nx>LetStatement</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nx>val</span> <span class=o>:=</span> <span class=nf>Eval</span><span class=p>(</span><span class=nx>node</span><span class=p>.</span><span class=nx>Value</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nf>isError</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>val</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>env</span><span class=p>.</span><span class=nf>Set</span><span class=p>(</span><span class=nx>node</span><span class=p>.</span><span class=nx>Name</span><span class=p>.</span><span class=nx>Value</span><span class=p>,</span> <span class=nx>val</span><span class=p>)</span>
</span></span></code></pre></div><p>Example:</p><pre tabindex=0><code>,2 * 2 - 2 = two let
</code></pre><p>The value of <code>two</code> will be stored as <code>2</code>, not as <code>2 * 2 - 2</code>, because we recursively call the <code>Eval</code> function on the expression before setting it.</p><p>For a while loop, we repeatedly evaluate the condition and run the loop body until the condition becomes false.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>case</span> <span class=o>*</span><span class=nx>ast</span><span class=p>.</span><span class=nx>WhileExpression</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>condition</span> <span class=o>:=</span> <span class=nf>Eval</span><span class=p>(</span><span class=nx>node</span><span class=p>.</span><span class=nx>Condition</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nf>isError</span><span class=p>(</span><span class=nx>condition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>condition</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>!</span><span class=nf>isTruthy</span><span class=p>(</span><span class=nx>condition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>rt</span> <span class=o>:=</span> <span class=nf>Eval</span><span class=p>(</span><span class=nx>node</span><span class=p>.</span><span class=nx>Body</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>rt</span><span class=p>.</span><span class=nf>Type</span><span class=p>()</span> <span class=o>==</span> <span class=nx>object</span><span class=p>.</span><span class=nx>RETURN_VALUE_OBJ</span> <span class=o>||</span> <span class=nx>rt</span><span class=p>.</span><span class=nf>Type</span><span class=p>()</span> <span class=o>==</span> <span class=nx>object</span><span class=p>.</span><span class=nx>ERROR_OBJ</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>Finally, to handle increments and reassignments, we first check whether the variable (identifier) exists in the environment. If it does, we perform the necessary operation and update the environment with the new value.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>evalAssignExpression</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>operator</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>value</span> <span class=nx>object</span><span class=p>.</span><span class=nx>Object</span><span class=p>,</span> <span class=nx>env</span> <span class=o>*</span><span class=nx>object</span><span class=p>.</span><span class=nx>Environment</span><span class=p>)</span> <span class=nx>object</span><span class=p>.</span><span class=nx>Object</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>current</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>env</span><span class=p>.</span><span class=nf>Get</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nf>newError</span><span class=p>(</span><span class=s>&#34;identifier not found: %s&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>switch</span> <span class=nx>operator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=s>&#34;=&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nx>env</span><span class=p>.</span><span class=nf>Set</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=s>&#34;+=&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nx>env</span><span class=p>.</span><span class=nf>Set</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nf>evalInfixExpression</span><span class=p>(</span><span class=s>&#34;+&#34;</span><span class=p>,</span> <span class=nx>current</span><span class=p>,</span> <span class=nx>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>// ...other cases...</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>For example, consider:</p><pre tabindex=0><code>,0 = i let

{i &lt; 10} while [
    ,1 += i
]
</code></pre><p>It will first execute the LetStatement branch and set <code>i</code> as <code>0</code>.</p><p>ENV: i = 0</p><p>Then it will execute the WhileExpression branch and check the condition, which is <code>true</code> as <em>0 &lt; 10</em>, and then it will execute the body, which adds 1 to <code>i</code>. Our <code>evalAssignExpression</code> method handles this case and updates the environment.</p><p>ENV: i = 1</p><p>This continues until <code>i</code> is set to <code>9</code>, at which point the condition is <strong>no longer</strong> <code>true</code>. Then it will return control back to the program node, which checks for the next statement to execute.</p><p>As there is none, it will exit the program.</p><h1 id=what-are-my-learnings>What are my learnings?<a hidden class=anchor aria-hidden=true href=#what-are-my-learnings>#</a></h1><p>I&rsquo;ve learned a ton from this project. It&rsquo;s my first major project built with Go, which is also my first programming language.</p><p>Most importantly, while developing the parser, I learned that if something isn&rsquo;t working, it&rsquo;s best not to dwell on the issue. Instead, taking a break, getting some fresh air, and returning to the problem with a clear mind is much more effective.</p><p>I also learned how to compile the interpreter to <a href=https://webassembly.org/>WebAssembly (WASM)</a>. A key challenge was figuring out how to access the <em>standard out</em> within the browser environment, so that printed results from AntiLang could be displayed. That was a learning curve in itself.</p><p>Writing a grammar for syntax highlighting a new language using the <a href=https://microsoft.github.io/monaco-editor/>Monaco editor</a> was another major challenge. I had no idea if something like this existed, even though it&rsquo;s something that powers VSCode and I use it every day. It was fascinating to see how syntax highlighting actually works under the hood. These two learnings are substantial enough for their own blog posts, which I plan to write in the coming weeks and will link here.</p><p>This project has given me a deep appreciation for the complexity of language development. Even this simple, unoptimized language took a month to build. I have immense respect for those who work on compilers and interpreters.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>So, there you have it â€“ a peek into the weird and wonderful world of AntiLang. Building it was a rollercoaster, from those late-night brainstorming sessions to wrestling with the parser (and occasionally, GitHub Copilot&rsquo;s &ldquo;helpful&rdquo; suggestions). It&rsquo;s wild to think how much goes into even a simple language like this. Honestly, if you&rsquo;re even remotely curious about compilers or interpreters, dive in. You&rsquo;ll learn a ton, and maybe even get a few headaches along the way. And hey, if you ever decide to build your own crazy language, drop me a line. I&rsquo;d love to see what you come up with.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://blog.darshanrander.com/posts/tech/animating-canvas-in-flutter/><span class=title>Next Â»</span><br><span>Animating Canvas in Flutter (Draft)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on x" href="https://x.com/intent/tweet/?text=How%20I%20wrote%20my%20language%3a%20AntiLang&amp;url=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f&amp;hashtags=AntiLang%2cProgrammingLanguage%2cGo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f&amp;title=How%20I%20wrote%20my%20language%3a%20AntiLang&amp;summary=How%20I%20wrote%20my%20language%3a%20AntiLang&amp;source=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f&title=How%20I%20wrote%20my%20language%3a%20AntiLang"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on whatsapp" href="https://api.whatsapp.com/send?text=How%20I%20wrote%20my%20language%3a%20AntiLang%20-%20https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on telegram" href="https://telegram.me/share/url?text=How%20I%20wrote%20my%20language%3a%20AntiLang&amp;url=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How I wrote my language: AntiLang on ycombinator" href="https://news.ycombinator.com/submitlink?t=How%20I%20wrote%20my%20language%3a%20AntiLang&u=https%3a%2f%2fblog.darshanrander.com%2fposts%2ftech%2fhow-i-wrote-my-language%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>Â© 2022 <a href=https://darshanrander.com>Darshan Rander</a> |</span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>